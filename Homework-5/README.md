# Домашнее задание №5

### 1. Задание: вывести общее количество запросов. 

1. В корень со скриптом положить файл access.log.
2. Выполнить скрипт: `python3 count_requests.py`.
3. Результат сохранится в файл: `count_requests.txt`.
   * Для сохранения данных в json, необходимо добавить флаг "--json". 
Результат сохранится в файл: `count_requests.json`

Аналог для консоли: 
```shell script
cat access.log | wc -l
```

### 2. Задание: общее количество запросов по типу.

1. В корень со скриптом положить файл access.log.
2. Выполнить скрипт: `python3 count_requests_type.py`.
3. Результат сохранится в файл: `count_requests_type.txt` 
   * Для сохранения данных в json, необходимо добавить флаг "--json". Результат сохранится в файл: `count_requests_type.json`
    
Аналог для консоли: 
```shell script
cat access.log | awk '{if(length($6) < 7) print $6}' | sort | uniq -c
```

### 3. Задание: топ 10 самых частых запросов.

1. В корень со скриптом положить файл access.log.
2. Выполнить скрипт: `python3 count_top_resource.py`.
3. Результат сохранится в файл: `count_top_resource.txt`
    * Для сохранения данных в json, необходимо добавить флаг "--json". Результат сохранится в файл: `count_top_resource.json`
    
Аналог для консоли: 
```shell script
cat access.log | awk '{print $7}' | sort | uniq -c | sort -nr | head
```

### 4. Задание: топ 5 самых больших запросов с ошибкой 4XX.

1. В корень со скриптом положить файл access.log.
2. Выполнить скрипт: `python3 big_requests_error.py`.
3. Результат сохранится в файл: `big_requests_error.txt`
    * Для сохранения данных в json, необходимо добавить флаг "--json". Результат сохранится в файл: `big_requests_error.json`
    
Аналог для консоли:  
```shell script
cat access.log | awk '{if($9 ~ /4[0-9][0-9]/) print $7,$9,$10,$1}' | uniq | sort -k3 -rn | head -n 5
```

### 5. Задание: Топ 5 пользователей по количеству запросов, которые завершились серверной (5ХХ) ошибкой
1. В корень со скриптом положить файл access.log.
2. Выполнить скрипт: `python3 internal_errors.py`.
3. Результат сохранится в файл: `internal_errors.txt`
    * Для сохранения данных в json, необходимо добавить флаг "--json". Результат сохранится в файл: `internal_errors.json`
    
Аналог для консоли: 
```shell script
cat access.log | awk '{if($9 >= 500 && $9 < 600) print $1}' | uniq -c | sort -nr | head -n 5
```

## Вывод

###Bash
Плюсы: 
1. Решается в одну строчку
2. Быстро и удобно
3. Подсказки по использованию прямо в консоли

Минусы: 
1. Сложно работать с промежуточными данными.
2. Сложно отформатировать вывод (допустим, в json)
3. При добавлении дополнительной логики (допустим в awk) становится сложнее читать

### Python:
Плюсы 
1. Удобно работать с промежуточными данными
2. Можно отформатировать вывод так, как удобно и хочется. 
3. Не надо делать сложно читаемую логику в awk.
4. Много удобных библиотек для работы с данными.

Минусы:
1. Решается не в одну строчку. 
2. Необходимо заниматься отладкой, т.к. решение пишешь самостоятельно